@model MarketPlace.WebUI.Models.Auction
@using Microsoft.AspNet.Identity

@{
    ViewBag.Title = "Подробности";
}

<h4>Подробности</h4>

<div>
    <h4>Аукцион</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>@Html.DisplayNameFor(model => model.Title)</dt>
        <dd>@Html.DisplayFor(model => model.Title)</dd>

        <dt>@Html.DisplayNameFor(model => model.Category.Title)</dt>
        <dd>@Html.DisplayFor(model => model.Category.Title)</dd>

        <dt>@Html.DisplayNameFor(model => model.User.Name)</dt>
        <dd>@Html.DisplayFor(model => model.User.Name)</dd>

        <dt>@Html.DisplayNameFor(model => model.Description)</dt>
        <dd>@Html.DisplayFor(model => model.Description)</dd>

        <dt>@Html.DisplayNameFor(model => model.Price)</dt>
        <dd>@Html.DisplayFor(model => model.Price) @ViewBag.Currency</dd>

        <dt>@Html.DisplayNameFor(model => model.Information)</dt>
        <dd>@Html.DisplayFor(model => model.Information)</dd>

        <dt>@Html.DisplayNameFor(model => model.CreationDate)</dt>
        <dd>@Html.DisplayFor(model => model.CreationDate)</dd>
        <dt> @Html.DisplayNameFor(model => model.FinishDate)</dt>
        <dd>@Html.DisplayFor(model => model.FinishDate)</dd>

    </dl>
</div>
<p>

    @Html.ActionLink("Back to List", "All")
</p>
<div class="row">
    <div class="col-md-12">
        @*@Ajax.ActionLink("Обновить", "List", "Bid", new { id = Model.AuctionId },
            new AjaxOptions { UpdateTargetId = "BidList" }, new { @class = "btn btn-default" })*@
        @if (User.Identity.Name == Model.User.UserName)
        {
            @Html.ActionLink("Остановить", "Finish", new { id = Model.AuctionId }, new { @class = "btn btn-default" })
            if (Model.Bids.Count == 0)
            {
                @Html.ActionLink("Редактировать", "Edit", new { id = Model.AuctionId }, new { @class = "btn btn-default" })
            }
        }
        else
        {
            using (Html.BeginForm("Create", "Bid", FormMethod.Post))
            {
                @Html.AntiForgeryToken()
                @Html.Hidden("AuctionId", @Model.AuctionId);
                @Html.Hidden("UserId", @Model.UserId);
                @Html.TextBox("Amount", "Размер ставки")
                <input type="submit" name="Ставка!" />
            }
        }

        <table class="table">
            <thead>
                <tr>
                    <th>@Html.Label("Время"))</th>
                    <th>@Html.Label("Сумма"))</th>
                    <th>@Html.Label("Пользователь"))</th>
                   
                </tr>
            </thead>

            <tbody>
                @foreach (var item in Model.Bids)
                {
                    <tr>
                        <td>@Html.DisplayFor(modelItem => item.Datetime)</td>
                        <td>@Html.DisplayFor(modelItem => item.Amount)</td>
                        <td>@Html.DisplayFor(modelItem => item.User.UserName)</td>
                    </tr>
                }
            </tbody>



        </table>

        


    </div>



</div>


